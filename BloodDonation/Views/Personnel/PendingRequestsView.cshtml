@using BloodDonation.Models;
@using BloodDonation.Utils.Enums;
@model List<RequestPersonnel>

@{
    ViewBag.Title = "PendingRequestsView";
}



<html lang="en" dir="ltr">
<head>
    <title>Pending Requests</title>
    <meta charset="iso-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    @Styles.Render("~/Styles/layout_personel_add_blood.css")
    @Styles.Render("~/Styles/mediaqueries.css")
    <script src="@Url.Content(" ~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>

    <script src="@Url.Content(" ~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
</head>
<body>

    <div class="wrapper row1">
        <header id="header" class="clear">
            <div id="hgroup">
                <h1><a href="#">View all requests</a></h1>
                <h2><a href="#">Donation center personnel</a></h2>
            </div>
            @Html.Partial("NavigationBannerView", null)
        </header>
    </div>

    @*TODO: make the top of the table aligned to left for each of the column, somehow*@
    <div class="wrapper row3">
        <div class="container">
            <table style="width:100%">
                <tr>
                    <th>ID</th>
                    <th>Status</th>
                    <th>Component</th>
                    <th>Hospital </th>
                    <th>Doctor name</th>
                    <th>Doctor email</th>
                    <th>Quantity</th>
                    <th>Blood group</th>
                    <th>Blood RH</th>
                    <th>Urgency</th>
                    <th>Accept</th>
                </tr>
                @{
                    var text = "";
                    var method = "";
                    var reqID = "1";
                    var reqPH = "";
                }
                @foreach (var req in Model)
                {
                    switch (Convert.ToString(req.status))
                    {
                        case "BeingProcessed":
                            text = "Accept request";
                            method = "AcceptRequest";
                            break;
                        default:
                            text = "Send Blood";
                            method = "SendRequest";
                            break;
                    }
                    reqID = Convert.ToString(@req.ID);

                    <tr>
                        <td>@req.ID</td>
                        <td>@req.status</td>
                        <td>@req.bloodType.component</td>
                        <td>@req.hospitalName <br> @req.hospitalLocation</td>
                        <td>@req.doctorName</td>
                        <td>@req.doctorEmail</td>
                        <td>@req.quantity</td>
                        <td>@req.bloodType.Group</td>
                        <td>@req.bloodType.PH</td>
                        <td>@(((DoctorUrgencyLevel)req.urgency).ToString())</td>

                        <td>
                            @Html.ActionLink(@text, @method, "Personnel", new { id = @reqID }, null)
                        </td>
                    </tr>
                }

            </table>
        </div>
    </div>
    <!-- Footer -->
    <div class="wrapper row4">
        <footer id="footer" class="clear">
            <p class="fl_left">Copyright &copy; 2013 - All Rights Reserved - <a href="#">Domain Name</a></p>
        </footer>
    </div>
</body>
</html>
